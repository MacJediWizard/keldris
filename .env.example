# ===================
# Keldris Configuration
# ===================

# Database
# IMPORTANT: Change 'changeme' to a strong password (both must match)
POSTGRES_PASSWORD=changeme
DATABASE_URL=postgres://keldris:changeme@db:5432/keldris?sslmode=disable
# POSTGRES_USER=keldris       # Override default PostgreSQL username
# POSTGRES_DB=keldris         # Override default database name

# OIDC Authentication (required)
# Supports Authentik, Keycloak, Okta, Auth0, Azure AD, Google Workspace
OIDC_ISSUER=https://auth.example.com/application/o/keldris/
OIDC_CLIENT_ID=your-client-id
OIDC_CLIENT_SECRET=your-client-secret
OIDC_REDIRECT_URL=http://localhost:8080/auth/callback

# Security
# SESSION_SECRET: openssl rand -base64 48
# ENCRYPTION_KEY: openssl rand -hex 32
SESSION_SECRET=generate-me-with-openssl-rand-base64-48
ENCRYPTION_KEY=generate-me-with-openssl-rand-hex-32

# Server
LISTEN_ADDR=:8080
GIN_MODE=release
# ENV=production  # Uncomment for production (enables Secure cookies, strict CORS, HSTS)
CORS_ORIGINS=http://localhost:8080,https://backup.example.com
# SERVER_PORT=8080  # Host port mapping for Docker (default: 8080)

# Optional: Redis for distributed rate limiting
# REDIS_URL=redis://localhost:6379

# Optional: SMTP for email notifications (configure via web UI, not env vars)
# These are shown for reference only â€” SMTP settings are managed in
# Settings > Notifications within the Keldris web interface.
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USER=notifications@example.com
# SMTP_PASSWORD=your-smtp-password
# SMTP_FROM=Keldris <notifications@example.com>

# Optional: Session configuration
# SESSION_MAX_AGE=86400
# SESSION_IDLE_TIMEOUT=1800

# Optional: Rate limiting
# RATE_LIMIT_REQUESTS=100
# RATE_LIMIT_PERIOD=1m

# Optional: Data retention
# RETENTION_DAYS=90

# Optional: Air-gapped deployment (no internet access)
# AIR_GAP_MODE=false

# Agent configuration (used in docker-compose with agent profile)
# AGENT_API_KEY=your-agent-api-key
# BACKUP_SOURCE_PATH=/data  # Host path to back up (mounted read-only)
